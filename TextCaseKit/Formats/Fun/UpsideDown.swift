import Foundation

public final class UpsideDown: Format {
    
    public var name: String = "Upside Down"
    public var description: String = "Flip all characters."

    public init() {}

    let flippedMap: [String: String] = [
        "a": "ɐ",
        "b": "q",
        "c": "ɔ",
        "d": "p",
        "e": "ǝ",
        "f": "ɟ",
        "g": "ƃ",
        "h": "ɥ",
        "i": "ᴉ",
        "j": "ɾ",
        "k": "ʞ",
        "l": "l",
        "m": "ɯ",
        "n": "u",
        "o": "o",
        "p": "d",
        "q": "b",
        "r": "ɹ",
        "s": "s",
        "t": "ʇ",
        "u": "n",
        "v": "ʌ",
        "w": "ʍ",
        "x": "x",
        "y": "ʎ",
        "z": "z",
        "µ": "µ",
        "ß": "ß",
        "à": "à",
        "á": "á",
        "â": "â",
        "ã": "ã",
        "ä": "ä",
        "å": "å",
        "æ": "æ",
        "ç": "ç",
        "è": "è",
        "é": "é",
        "ê": "ê",
        "ë": "ë",
        "ì": "ì",
        "í": "í",
        "î": "î",
        "ï": "ï",
        "ð": "ð",
        "ñ": "ñ",
        "ò": "ò",
        "ó": "ó",
        "ô": "ô",
        "õ": "õ",
        "ö": "ö",
        "ø": "ø",
        "ù": "ù",
        "ú": "ú",
        "û": "û",
        "ü": "ü",
        "ý": "ý",
        "þ": "þ",
        "ÿ": "ÿ",
        "ā": "ā",
        "ă": "ă",
        "ą": "ą",
        "ć": "ć",
        "ĉ": "ĉ",
        "ċ": "ċ",
        "č": "č",
        "ď": "ď",
        "đ": "đ",
        "ē": "ē",
        "ĕ": "ĕ",
        "ė": "ė",
        "ę": "ę",
        "ě": "ě",
        "ĝ": "ĝ",
        "ğ": "ğ",
        "ġ": "ġ",
        "ģ": "ģ",
        "ĥ": "ĥ",
        "ħ": "ħ",
        "ĩ": "ĩ",
        "ī": "ī",
        "ĭ": "ĭ",
        "į": "į",
        "ı": "ı",
        "ĳ": "ĳ",
        "ĵ": "ĵ",
        "ķ": "ķ",
        "ĸ": "ĸ",
        "ĺ": "ĺ",
        "ļ": "ļ",
        "ľ": "ľ",
        "ŀ": "ŀ",
        "ł": "ł",
        "ń": "ń",
        "ņ": "ņ",
        "ň": "ň",
        "ŉ": "ŉ",
        "ŋ": "ŋ",
        "ō": "ō",
        "ŏ": "ŏ",
        "ő": "ő",
        "œ": "œ",
        "ŕ": "ŕ",
        "ŗ": "ŗ",
        "ř": "ř",
        "ś": "ś",
        "ŝ": "ŝ",
        "ş": "ş",
        "š": "š",
        "ţ": "ţ",
        "ť": "ť",
        "ŧ": "ŧ",
        "ũ": "ũ",
        "ū": "ū",
        "ŭ": "ŭ",
        "ů": "ů",
        "ű": "ű",
        "ų": "ų",
        "ŵ": "ŵ",
        "ŷ": "ŷ",
        "ź": "ź",
        "ż": "ż",
        "ž": "ž",
        "1": "Ɩ",
        "2": "ᄅ",
        "3": "Ɛ",
        "4": "ㄣ",
        "5": "ϛ",
        "6": "9",
        "7": "ㄥ",
        "8": "8",
        "9": "6",
        "0": "0",
        "@": "@",
        "!": "¡",
        "£": "£",
        "$": "$",
        "%": "%",
        "^": "^",
        "&": "⅋",
        "*": "*",
        "(": ")",
        ")": "(",
        "{": "}",
        "}": "{",
        "[": "]",
        "]": "[",
        "_": "‾",
        "-": "-",
        "+": "+",
        "=": "=",
        ":": ":",
        ";": ";",
        "”": "”",
        "’": "’",
        "|": "|",
        "\\": "\\",
        "?": "¿",
        "/": "/",
        ">": "<",
        ".": "˙",
        "<": ">",
        ",": "'",
        "~": "~",
        "`": ",",
        "±": "±",
        "§": "§",
        "A": "∀",
        "B": "q",
        "C": "Ɔ",
        "D": "p",
        "E": "Ǝ",
        "F": "Ⅎ",
        "G": "פ",
        "H": "H",
        "I": "I",
        "J": "ſ",
        "K": "ʞ",
        "L": "˥",
        "M": "W",
        "N": "N",
        "O": "O",
        "P": "Ԁ",
        "Q": "Q",
        "R": "ɹ",
        "S": "S",
        "T": "┴",
        "U": "∩",
        "V": "Λ",
        "W": "M",
        "X": "X",
        "Y": "⅄",
        "Z": "Z",
        "Μ": "Μ",
        "À": "À",
        "Á": "Á",
        "Â": "Â",
        "Ã": "Ã",
        "Ä": "Ä",
        "Å": "Å",
        "Æ": "Æ",
        "Ç": "Ç",
        "È": "È",
        "É": "É",
        "Ê": "Ê",
        "Ë": "Ë",
        "Ì": "Ì",
        "Í": "Í",
        "Î": "Î",
        "Ï": "Ï",
        "Ð": "Ð",
        "Ñ": "Ñ",
        "Ò": "Ò",
        "Ó": "Ó",
        "Ô": "Ô",
        "Õ": "Õ",
        "Ö": "Ö",
        "Ø": "Ø",
        "Ù": "Ù",
        "Ú": "Ú",
        "Û": "Û",
        "Ü": "Ü",
        "Ý": "Ý",
        "Þ": "Þ",
        "Ÿ": "Ÿ",
        "Ā": "Ā",
        "Ă": "Ă",
        "Ą": "Ą",
        "Ć": "Ć",
        "Ĉ": "Ĉ",
        "Ċ": "Ċ",
        "Č": "Č",
        "Ď": "Ď",
        "Đ": "Đ",
        "Ē": "Ē",
        "Ĕ": "Ĕ",
        "Ė": "Ė",
        "Ę": "Ę",
        "Ě": "Ě",
        "Ĝ": "Ĝ",
        "Ğ": "Ğ",
        "Ġ": "Ġ",
        "Ģ": "Ģ",
        "Ĥ": "Ĥ",
        "Ħ": "Ħ",
        "Ĩ": "Ĩ",
        "Ī": "Ī",
        "Ĭ": "Ĭ",
        "Į": "Į",
        "Ĳ": "Ĳ",
        "Ĵ": "Ĵ",
        "Ķ": "Ķ",
        "Ĺ": "Ĺ",
        "Ļ": "Ļ",
        "Ľ": "Ľ",
        "Ŀ": "Ŀ",
        "Ł": "Ł",
        "Ń": "Ń",
        "Ņ": "Ņ",
        "Ň": "Ň",
        "ʼ": "ʼ",
        "Ŋ": "Ŋ",
        "Ō": "Ō",
        "Ŏ": "Ŏ",
        "Ő": "Ő",
        "Œ": "Œ",
        "Ŕ": "Ŕ",
        "Ŗ": "Ŗ",
        "Ř": "Ř",
        "Ś": "Ś",
        "Ŝ": "Ŝ",
        "Ş": "Ş",
        "Š": "Š",
        "Ţ": "Ţ",
        "Ť": "Ť",
        "Ŧ": "Ŧ",
        "Ũ": "Ũ",
        "Ū": "Ū",
        "Ŭ": "Ŭ",
        "Ů": "Ů",
        "Ű": "Ű",
        "Ų": "Ų",
        "Ŵ": "Ŵ",
        "Ŷ": "Ŷ",
        "Ź": "Ź",
        "Ż": "Ż",
        "Ž": "Ž",
    ]

    public func process(_ input: String) -> String {
        guard !input.isEmpty else { return "" }
        var converted = ""
        for char in input {
            if let caps = flippedMap["\(char)"] {
                converted.append(caps)
            } else {
                converted.append(char)
            }
        }
        return converted
    }

}
